(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[33],{bQgK:function(e,t,n){(function(t){(function(){var n,a,o,r,i,l;"undefined"!==typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:"undefined"!==typeof t&&null!==t&&t.hrtime?(e.exports=function(){return(n()-i)/1e6},a=t.hrtime,r=(n=function(){var e;return 1e9*(e=a())[0]+e[1]})(),l=1e9*t.uptime(),i=r-l):Date.now?(e.exports=function(){return Date.now()-o},o=Date.now()):(e.exports=function(){return(new Date).getTime()-o},o=(new Date).getTime())}).call(this)}).call(this,n("8oxB"))},gNcs:function(e,t,n){"use strict";n.d(t,"a",(function(){return U}));var a=n("o0o1"),o=n.n(a),r=n("HaE+"),i=n("4IMT"),l=n.n(i),c=n("9xET"),u=n.n(c),s=n("ZPTe"),d=n.n(s),p=n("q1tI"),f=n.n(p),g=n("rePB"),h=n("YFqc"),m=n.n(h),b=n("vOnD"),x=n("bC0J"),y=n("YEJx"),w=b.d.form.withConfig({displayName:"BookingCalculationFormstyle__ReservationFormWrapper",componentId:"d3uagk-0"})(["padding:0 30px 30px;@media (max-width:375px){padding:0 15px;}"]),v=b.d.div.withConfig({displayName:"BookingCalculationFormstyle__FieldWrapper",componentId:"d3uagk-1"})(["margin-bottom:30px;@media (max-width:375px){margin-bottom:25px;}label{font-size:15px;color:",";text-transform:capitalize;margin-bottom:7px;display:block;}.date_picker{margin-bottom:0;> label{margin-bottom:0;width:100%;}.DateRangePicker{width:100%;input,.DateRangePickerInput{border:0;width:100%;height:54px;display:flex;padding:0 15px;font-size:15px;font-weight:400;border-radius:3px;align-items:center;justify-content:space-between;color:",";background-color:",";&::placeholder{font-size:15px;color:",";}.DateInput{width:auto;.DateInput_fang{top:46px !important;}}.DateRangePickerInput_arrow{& + .DateInput{input{text-align:right;}}}}.DateRangePicker_picker{top:56px !important;.DayPicker{width:316px !important;.DayPicker_focusRegion{.DayPicker_transitionContainer{width:316px !important;.CalendarMonth_caption{font-size:16px;color:",";}}}}}}}.view_with__popup{.popup_handler{button,button.ant-btn{border:0;width:100%;display:flex;padding:0 25px;font-size:15px;font-weight:400;min-height:54px;border-radius:3px;align-items:center;justify-content:space-between;color:",";background-color:",";&::after{display:none;}}}&.active{.popup_container{max-width:316px;padding:25px 22px;position:absolute;left:0;top:56px;z-index:2;box-shadow:0 2px 6px rgba(0,0,0,0.05),0 0 0 1px rgba(0,0,0,0.07);&::before{content:'';width:14px;height:14px;top:-8px;left:36px;position:absolute;border-radius:2px;transform:rotate(45deg);background-color:",";border-top:1px solid ",";border-left:1px solid ",";}}}}"],Object(x.a)("text.0","#2C2C2C"),Object(x.a)("text.0","#2C2C2C"),Object(x.a)("color.2","#F7F7F7"),Object(x.a)("text.0","#2C2C2C"),Object(x.a)("text.0","#2C2C2C"),Object(x.a)("text.0","#2C2C2C"),Object(x.a)("color.2","#F7F7F7"),Object(x.a)("color.1","#ffffff"),Object(x.a)("border.3","#E6E6E6"),Object(x.a)("border.3","#E6E6E6")),O=b.d.div.withConfig({displayName:"BookingCalculationFormstyle__RoomGuestWrapper",componentId:"d3uagk-2"})(["width:100%;strong{font-size:15px;font-weight:400;color:",";}"],Object(x.a)("text.0","#2C2C2C")),k=b.d.div.withConfig({displayName:"BookingCalculationFormstyle__ItemWrapper",componentId:"d3uagk-3"})(["display:flex;align-items:center;justify-content:space-between;margin-bottom:20px;&:last-child{margin-bottom:10px;}.quantity{height:30px;input{font-size:15px;}button.btn svg{width:18px;height:18px;}}"]),D=b.d.div.withConfig({displayName:"BookingCalculationFormstyle__BillWrapper",componentId:"d3uagk-4"})(["ul{padding:0;li{font-size:16px;margin-bottom:16px;}&.cost-list{text-align:right;}}"]),_=(b.d.div.withConfig({displayName:"BookingCalculationFormstyle__FormActionArea",componentId:"d3uagk-5"})(["display:flex;justify-content:center;flex-direction:column;button.ant-btn-primary{max-width:200px;height:47px;color:#ffffff;font-size:15px;font-weight:700;border-color:",";background-color:",";transition:all 0.2s ease;&:hover,&:focus{outline:none;opacity:0.93;}}p{margin-top:20px;}"],Object(y.a)("primary",0),Object(y.a)("primary",0)),b.d.div.withConfig({displayName:"BookingCalculationFormstyle__CardHeaderWrapper",componentId:"d3uagk-6"})(["width:100%;h3{color:",";&.header-price{color:",";}}.ant-row{position:relative;display:flex;.header-buttons-wrapper{width:100%;position:absolute;bottom:10px;display:flex;justify-content:center;button{display:flex;justify-content:center;align-items:center;font-size:12px;border-radius:10px;background-color:",";&:hover,&:active{color:",";background-color:#ffffff !important;}&:first-child{img{height:30px;}margin-right:16px;}}}}"],Object(y.a)("primary",0),Object(y.a)("warning",0),Object(y.a)("warning",0),Object(y.a)("primary",0)),w),j=n("8gEg"),C=n("EKex"),F=n("tC0J"),I=n("t9tb"),N=n("nOHt"),S=n("wd/R"),P=n.n(S),E=n("OKMn"),B=n("7Sp7"),z=f.a.createElement;function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){Object(g.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var R=function(e){var t=e.property,n=e.disabled,a=t.min_sleeps,o=t.price,r=t.checked_dates,i=t.pricing_items,c=t.tax_rate,s=t.cleaning_fee,f=t.refundable_amount,h=t.transactionfee_rate,b=Object(p.useContext)(I.a),x=b.state,y=b.dispatch,w=Object(p.useState)({checkinDate:x.checkinDate?P()(x.checkinDate):null,checkoutDate:x.checkoutDate?P()(x.checkoutDate):null,adults:x.adults,children:x.children}),S=w[0],A=w[1],R=Object(p.useState)(null),M=R[0],q=R[1],K=Object(p.useState)(null),W=K[0],$=K[1],J=Object(N.useRouter)();Object(p.useEffect)((function(){console.log("___BookingCalculationForm: BookingContext___",x),n&&q({nights:x.nights,propertyFee:x.propertyFee,tax:x.tax,transactionFee:x.transactionFee,cleaningFee:x.cleaningFee,refundableAmount:x.refundableAmount,total:x.total})}),[]),Object(p.useEffect)((function(){if(null!==S.checkinDate&&null!==S.checkoutDate&&0!==S.adults){$(!0);var e=V(S.checkinDate,S.checkoutDate);q(e),y({type:"UPDATE_BOOKING_INFORMATION",payload:T(T(T({},x),S),e)}),setTimeout((function(){$(!1)}),1e3)}else q(null)}),[S]);var U=function(e){A(T(T({},S),{},Object(g.a)({},e,parseInt(S[e])+1)))},G=function(e){if(S[e]<=0)return!1;A(T(T({},S),{},Object(g.a)({},e,parseInt(S[e])-1)))},H=function(e,t){var n=e.target.value;A(T(T({},S),{},Object(g.a)({},t,parseInt(n))))},Y=function(e){return r.some((function(t,n){return!(!e.isSameOrAfter(t.arrival_date,"day")||!e.isSameOrBefore(t.departure_date,"day"))}))},L=function(e){var t=o;return i.map((function(n){P()(e).diff(n.start_date)>=0&&P()(e).diff(n.end_date)<=0&&(t=n.price)})),t},Q=function(e){return parseFloat(e.toFixed(2))},V=function(e,t){console.log("calculateBookingCost");var n,a,o,r,i,l=0;n=P()(t).diff(P()(e),"day");var u=P()(e).startOf("day"),d=P()(t).startOf("day");do{l+=L(u.clone().toDate()),console.log("currentDate",u,L(u.clone().toDate()))}while(u.add(1,"days").diff(d)<=0);return a=Q(c*l/100),o=Q(l+a+ +s+f),r=Q(h*o/100),i=Q((1+h/100)*o),{nights:n,propertyFee:l,tax:a,transactionFee:r,cleaningFee:s,refundableAmount:f,total:i}};return z(_,{className:"form-container",onSubmit:function(e){e.preventDefault(),null!==S.checkinDate&&null!==S.checkoutDate?0!==S.adults?(y({type:"UPDATE_BOOKING_INFORMATION",payload:T(T(T({},x),M),S)}),J.push({pathname:"/checkout-review"},{pathname:"/checkout-review"},{shallow:!0})):Object(E.a)("warning","Please input number of guests"):Object(E.a)("warning","Please select dates")}},z(v,null,z(j.a,{disabled:n,startDate:S.checkinDate,endDate:S.checkoutDate,startDatePlaceholderText:"Check In",endDatePlaceholderText:"Check Out",startDateId:"startDateId-id",endDateId:"endDateId-id",showClearDates:!0,small:!0,minimumNights:a,numberOfMonths:1,updateSearchData:function(e){return function(e){console.log("updateSearchDataFunc",e),A(T(T({},S),{},{checkinDate:e.setStartDate,checkoutDate:e.setEndDate}))}(e)},isDayBlocked:function(e){return function(e){return P()(e)<P()().startOf("day")||!0===Y(e)}(e)},renderDayContents:function(e){return function(e){return P()(e)<P()().startOf("day")?z("div",{className:"past-date"},z("h6",null,e.format("D"))):!0===Y(e)?z("div",{className:"booked-date"},z("h6",null,e.format("D"))):(i.map((function(t){P()(e)>P()(new Date(t.start_date))&&P()(e)<P()(new Date(t.end_date))&&t.price})),z("div",{className:"date"},z("h6",null,e.format("D")),z("span",null,"$",o)))}(e)}})),z(v,null,z(C.a,{key:200,noView:!0,className:S.adults||S.children?"activated":"",view:z(l.a,{type:"default"},z("span",null,"Adults ",S.adults>0&&": ".concat(S.adults)),z("span",null,"-"),z("span",null,"Children",S.children>0&&": ".concat(S.children))),popup:z(O,null,z(k,null,z("strong",null,"Adults"),z(F.a,{id:"adults",increment:function(){return U("adults")},decrement:function(){return G("adults")},onChange:function(e){return H(e,"adults")},value:S.adults})),z(k,null,z("strong",null,"Children"),z(F.a,{id:"children",increment:function(){return U("children")},decrement:function(){return G("children")},onChange:function(e){return H(e,"children")},value:S.children})))})),W&&z(B.a,null),M&&!W&&z(D,null,z(u.a,null,z(d.a,{sm:12},console.log("___billState",M),z("ul",null,z("li",null,null===M||void 0===M?void 0:M.nights," nights"),z("li",null,"Cleaning fee"),z("li",null,"Security deposit"),z("li",null,"Transaction fee (",null===t||void 0===t?void 0:t.transactionfee_rate,"%)"),z("li",null,"Tax (",null===t||void 0===t?void 0:t.tax_rate,"%)"))),z(d.a,{sm:12},z("ul",{className:"cost-list"},z("li",null,"$",null===M||void 0===M?void 0:M.propertyFee),z("li",null,"$",null===M||void 0===M?void 0:M.cleaningFee),z("li",null,"$",null===M||void 0===M?void 0:M.refundableAmount),z("li",null,"$",null===M||void 0===M?void 0:M.transactionFee),z("li",null,"$",null===M||void 0===M?void 0:M.tax)))),z("hr",null),z(u.a,null,z(d.a,{sm:18},z("ul",null,z("li",null,"Total"))),z(d.a,{sm:6},z("ul",{className:"cost-list"},z("li",null,"$",null===M||void 0===M?void 0:M.total))))),z("p",null,"For booking assistance please ",z(m.a,{href:"/contact"},"contact us")))},M=n("XOqz"),q=n("vtjS"),K=n("/Mzf"),W=n("Ye+W"),$=f.a.createElement,J=function(e){var t=e.name,n=e.images,a=e.isModalShowing,o=e.setIsModalShowing,r=$(f.a.Fragment,null,$(u.a,null,n?[0,1,2].map((function(e){return void 0===n[e]?$(d.a,{key:e,lg:8},$("div",{style:{backgroundImage:"url(".concat(n[0].file,")"),backgroundPosition:"center center",backgroundSize:"cover",height:100}})):$(d.a,{key:e,lg:8},$("div",{style:{backgroundImage:"url(".concat(n[e].file,")"),backgroundPosition:"center center",backgroundSize:"cover",height:100}}))})):$(B.a,null)));return $(K.a,null,r,$(u.a,null,$("div",{className:"header-buttons-wrapper"},$(l.a,{type:"secondary",size:"large"},$("img",{src:"/static/assets/dd670cff30df37b4ce2b11f14326f74d.svg",alt:"tour"})),$(l.a,{type:"secondary",size:"large",onClick:function(){return o(!0)}},"Browse Photos"))),$("h3",null,t),$(q.a,{isModalShowing:a,setIsModalShowing:o,images:n}))};function U(e){var t=e.disabled,n=Object(p.useState)(null),a=n[0],i=n[1],l=Object(p.useContext)(I.a),c=l.state,u=l.dispatch,s=Object(N.useRouter)();Object(p.useEffect)((function(){null!==c.propertySlug?x(c.propertySlug):s.push("/listing")}),[]);var d=Object(p.useState)(null),f=d[0],g=d[1],h=Object(p.useState)(!1),m=h[0],b=h[1],x=function(){var e=Object(r.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),e.prev=1,e.next=4,fetch("".concat(W.BACKEND_URL,"/api/accommodation/property/listing/").concat(t));case 4:return n=e.sent,e.next=7,n.json();case 7:a=e.sent,g(a),u({type:"UPDATE_BOOKING_INFORMATION",payload:{bookervilleId:a.bookerville_id}}),i(!1),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),Object(E.a)("warning","Server error while fetching property detail");case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}();return $(M.a,{className:"reservation_sidebar",header:!a&&f?$(J,{name:f.name,images:f.gallery_imgs,isModalShowing:m,setIsModalShowing:b}):$(B.a,null),footer:null},!a&&f?$(R,{disabled:t,property:f}):$(B.a,null))}},xEkU:function(e,t,n){(function(t){for(var a=n("bQgK"),o="undefined"===typeof window?t:window,r=["moz","webkit"],i="AnimationFrame",l=o["request"+i],c=o["cancel"+i]||o["cancelRequest"+i],u=0;!l&&u<r.length;u++)l=o[r[u]+"Request"+i],c=o[r[u]+"Cancel"+i]||o[r[u]+"CancelRequest"+i];if(!l||!c){var s=0,d=0,p=[];l=function(e){if(0===p.length){var t=a(),n=Math.max(0,16.666666666666668-(t-s));s=n+t,setTimeout((function(){var e=p.slice(0);p.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(s)}catch(n){setTimeout((function(){throw n}),0)}}),Math.round(n))}return p.push({handle:++d,callback:e,cancelled:!1}),d},c=function(e){for(var t=0;t<p.length;t++)p[t].handle===e&&(p[t].cancelled=!0)}}e.exports=function(e){return l.call(o,e)},e.exports.cancel=function(){c.apply(o,arguments)},e.exports.polyfill=function(e){e||(e=o),e.requestAnimationFrame=l,e.cancelAnimationFrame=c}}).call(this,n("yLpj"))}}]);