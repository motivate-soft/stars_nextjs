{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nvar _marked = /*#__PURE__*/_regeneratorRuntime.mark(getAllProperties),\n    _marked2 = /*#__PURE__*/_regeneratorRuntime.mark(getProperty),\n    _marked3 = /*#__PURE__*/_regeneratorRuntime.mark(addProperty),\n    _marked4 = /*#__PURE__*/_regeneratorRuntime.mark(updateProperty),\n    _marked5 = /*#__PURE__*/_regeneratorRuntime.mark(deleteProperty),\n    _marked6 = /*#__PURE__*/_regeneratorRuntime.mark(getPriceItems),\n    _marked7 = /*#__PURE__*/_regeneratorRuntime.mark(createPriceItem),\n    _marked8 = /*#__PURE__*/_regeneratorRuntime.mark(rootSaga);\n\nimport { all, takeEvery, fork, takeLatest, call, put } from \"redux-saga/effects\";\nimport actions from \"./actions\";\nimport { notification } from \"@iso/components\";\nimport propertyApi from \"../../service/propertyApi\";\nimport { Router } from \"next/router\";\nexport function getAllProperties() {\n  return _regeneratorRuntime.wrap(function getAllProperties$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.next = 2;\n          return takeLatest(actions.GET_ALL_PROPERTIES_REQUEST, /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n            var res;\n            return _regeneratorRuntime.wrap(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    _context.prev = 0;\n                    _context.next = 3;\n                    return call(propertyApi.getAll);\n\n                  case 3:\n                    res = _context.sent;\n                    console.log(\"___try\", res);\n                    _context.next = 7;\n                    return put({\n                      type: actions.GET_ALL_PROPERTIES_SUCCESS,\n                      items: res\n                    });\n\n                  case 7:\n                    _context.next = 14;\n                    break;\n\n                  case 9:\n                    _context.prev = 9;\n                    _context.t0 = _context[\"catch\"](0);\n                    console.log(\"___catch\", _context.t0);\n                    _context.next = 14;\n                    return put({\n                      type: actions.GET_ALL_PROPERTIES_FAILURE,\n                      error: _context.t0.message\n                    });\n\n                  case 14:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            }, _callee, null, [[0, 9]]);\n          }));\n\n        case 2:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked);\n}\nexport function getProperty() {\n  return _regeneratorRuntime.wrap(function getProperty$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.next = 2;\n          return takeEvery(actions.GET_PROPERTY_REQUEST, /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(payload) {\n            var res;\n            return _regeneratorRuntime.wrap(function _callee2$(_context3) {\n              while (1) {\n                switch (_context3.prev = _context3.next) {\n                  case 0:\n                    _context3.prev = 0;\n                    _context3.next = 3;\n                    return call(propertyApi.getOne, payload.propertyId);\n\n                  case 3:\n                    res = _context3.sent;\n                    _context3.next = 6;\n                    return put({\n                      type: actions.GET_PROPERTY_SUCCESS,\n                      item: res\n                    });\n\n                  case 6:\n                    _context3.next = 13;\n                    break;\n\n                  case 8:\n                    _context3.prev = 8;\n                    _context3.t0 = _context3[\"catch\"](0);\n                    notification('warning', _context3.t0.message);\n                    _context3.next = 13;\n                    return put({\n                      type: actions.GET_PROPERTY_FAILURE,\n                      error: _context3.t0.message\n                    });\n\n                  case 13:\n                  case \"end\":\n                    return _context3.stop();\n                }\n              }\n            }, _callee2, null, [[0, 8]]);\n          }));\n\n        case 2:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, _marked2);\n}\nexport function addProperty() {\n  return _regeneratorRuntime.wrap(function addProperty$(_context6) {\n    while (1) {\n      switch (_context6.prev = _context6.next) {\n        case 0:\n          _context6.next = 2;\n          return takeEvery(actions.ADD_PROPERTY_REQUEST, /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(payload) {\n            var res;\n            return _regeneratorRuntime.wrap(function _callee3$(_context5) {\n              while (1) {\n                switch (_context5.prev = _context5.next) {\n                  case 0:\n                    _context5.prev = 0;\n                    _context5.next = 3;\n                    return call(propertyApi.add, payload.property);\n\n                  case 3:\n                    res = _context5.sent;\n                    notification('success', 'New Property has been created successfully');\n                    _context5.next = 7;\n                    return put({\n                      type: actions.ADD_PROPERTY_SUCCESS,\n                      item: res\n                    });\n\n                  case 7:\n                    _context5.next = 14;\n                    break;\n\n                  case 9:\n                    _context5.prev = 9;\n                    _context5.t0 = _context5[\"catch\"](0);\n                    notification('warning', _context5.t0.message);\n                    _context5.next = 14;\n                    return put({\n                      type: actions.ADD_PROPERTY_FAILURE,\n                      error: _context5.t0.message\n                    });\n\n                  case 14:\n                  case \"end\":\n                    return _context5.stop();\n                }\n              }\n            }, _callee3, null, [[0, 9]]);\n          }));\n\n        case 2:\n        case \"end\":\n          return _context6.stop();\n      }\n    }\n  }, _marked3);\n}\nexport function updateProperty() {\n  return _regeneratorRuntime.wrap(function updateProperty$(_context8) {\n    while (1) {\n      switch (_context8.prev = _context8.next) {\n        case 0:\n          _context8.next = 2;\n          return takeEvery(actions.UPDATE_PROPERTY_REQUEST, /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(payload) {\n            var res;\n            return _regeneratorRuntime.wrap(function _callee4$(_context7) {\n              while (1) {\n                switch (_context7.prev = _context7.next) {\n                  case 0:\n                    _context7.prev = 0;\n                    _context7.next = 3;\n                    return call(propertyApi.update, payload.property);\n\n                  case 3:\n                    res = _context7.sent;\n                    notification('success', 'Property has been updated successfully');\n                    _context7.next = 7;\n                    return put({\n                      type: actions.UPDATE_PROPERTY_SUCCESS,\n                      item: res\n                    });\n\n                  case 7:\n                    _context7.next = 14;\n                    break;\n\n                  case 9:\n                    _context7.prev = 9;\n                    _context7.t0 = _context7[\"catch\"](0);\n                    notification('warning', _context7.t0.message);\n                    _context7.next = 14;\n                    return put({\n                      type: actions.UPDATE_PROPERTY_FAILURE,\n                      error: _context7.t0.message\n                    });\n\n                  case 14:\n                  case \"end\":\n                    return _context7.stop();\n                }\n              }\n            }, _callee4, null, [[0, 9]]);\n          }));\n\n        case 2:\n        case \"end\":\n          return _context8.stop();\n      }\n    }\n  }, _marked4);\n}\nexport function deleteProperty() {\n  return _regeneratorRuntime.wrap(function deleteProperty$(_context10) {\n    while (1) {\n      switch (_context10.prev = _context10.next) {\n        case 0:\n          _context10.next = 2;\n          return takeEvery(actions.DELETE_PROPERTY_REQUEST, /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(payload) {\n            return _regeneratorRuntime.wrap(function _callee5$(_context9) {\n              while (1) {\n                switch (_context9.prev = _context9.next) {\n                  case 0:\n                    _context9.prev = 0;\n                    _context9.next = 3;\n                    return call(propertyApi[\"delete\"], payload.propertyId);\n\n                  case 3:\n                    notification('success', 'Property has been deleted successfully');\n                    Router.push('/admin/property');\n                    _context9.next = 7;\n                    return put({\n                      type: actions.DELETE_PROPERTY_SUCCESS,\n                      propertyId: payload.propertyId\n                    });\n\n                  case 7:\n                    _context9.next = 14;\n                    break;\n\n                  case 9:\n                    _context9.prev = 9;\n                    _context9.t0 = _context9[\"catch\"](0);\n                    notification('warning', _context9.t0.message);\n                    _context9.next = 14;\n                    return put({\n                      type: actions.DELETE_PROPERTY_FAILURE,\n                      error: _context9.t0.message\n                    });\n\n                  case 14:\n                  case \"end\":\n                    return _context9.stop();\n                }\n              }\n            }, _callee5, null, [[0, 9]]);\n          }));\n\n        case 2:\n        case \"end\":\n          return _context10.stop();\n      }\n    }\n  }, _marked5);\n}\nexport function getPriceItems() {\n  return _regeneratorRuntime.wrap(function getPriceItems$(_context12) {\n    while (1) {\n      switch (_context12.prev = _context12.next) {\n        case 0:\n          _context12.next = 2;\n          return takeLatest(actions.GET_PRICE_ITEMS_REQUEST, /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(payload) {\n            var res;\n            return _regeneratorRuntime.wrap(function _callee6$(_context11) {\n              while (1) {\n                switch (_context11.prev = _context11.next) {\n                  case 0:\n                    _context11.prev = 0;\n                    _context11.next = 3;\n                    return call(propertyApi.getPriceItems, payload.propertyId);\n\n                  case 3:\n                    res = _context11.sent;\n                    _context11.next = 6;\n                    return put({\n                      type: actions.GET_PRICE_ITEMS_SUCCESS,\n                      items: res\n                    });\n\n                  case 6:\n                    _context11.next = 13;\n                    break;\n\n                  case 8:\n                    _context11.prev = 8;\n                    _context11.t0 = _context11[\"catch\"](0);\n                    notification('warning', _context11.t0.message);\n                    _context11.next = 13;\n                    return put({\n                      type: actions.GET_PRICE_ITEMS_FAILURE,\n                      error: _context11.t0.message\n                    });\n\n                  case 13:\n                  case \"end\":\n                    return _context11.stop();\n                }\n              }\n            }, _callee6, null, [[0, 8]]);\n          }));\n\n        case 2:\n        case \"end\":\n          return _context12.stop();\n      }\n    }\n  }, _marked6);\n}\nexport function createPriceItem() {\n  return _regeneratorRuntime.wrap(function createPriceItem$(_context14) {\n    while (1) {\n      switch (_context14.prev = _context14.next) {\n        case 0:\n          _context14.next = 2;\n          return takeLatest(actions.CREATE_PRICE_ITEM_REQUEST, /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(payload) {\n            var res;\n            return _regeneratorRuntime.wrap(function _callee7$(_context13) {\n              while (1) {\n                switch (_context13.prev = _context13.next) {\n                  case 0:\n                    _context13.prev = 0;\n                    _context13.next = 3;\n                    return call(propertyApi.createPriceItem, payload.pricing);\n\n                  case 3:\n                    res = _context13.sent;\n                    _context13.next = 6;\n                    return put({\n                      type: actions.CREATE_PRICE_ITEM_SUCCESS\n                    });\n\n                  case 6:\n                    notification('success', 'Pricing item created');\n                    _context13.next = 9;\n                    return put({\n                      type: actions.GET_PRICE_ITEMS_REQUEST,\n                      propertyId: payload.pricing.property\n                    });\n\n                  case 9:\n                    _context13.next = 16;\n                    break;\n\n                  case 11:\n                    _context13.prev = 11;\n                    _context13.t0 = _context13[\"catch\"](0);\n                    notification('warning', _context13.t0.message);\n                    _context13.next = 16;\n                    return put({\n                      type: actions.CREATE_PRICE_ITEM_FAILURE\n                    });\n\n                  case 16:\n                  case \"end\":\n                    return _context13.stop();\n                }\n              }\n            }, _callee7, null, [[0, 11]]);\n          }));\n\n        case 2:\n        case \"end\":\n          return _context14.stop();\n      }\n    }\n  }, _marked7);\n}\nexport default function rootSaga() {\n  return _regeneratorRuntime.wrap(function rootSaga$(_context15) {\n    while (1) {\n      switch (_context15.prev = _context15.next) {\n        case 0:\n          _context15.next = 2;\n          return all([call(getAllProperties), fork(getProperty), fork(addProperty), fork(updateProperty), fork(deleteProperty), fork(getPriceItems), fork(createPriceItem)]);\n\n        case 2:\n        case \"end\":\n          return _context15.stop();\n      }\n    }\n  }, _marked8);\n}","map":null,"metadata":{},"sourceType":"module"}