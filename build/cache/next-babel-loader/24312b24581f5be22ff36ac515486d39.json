{"ast":null,"code":"import _Row from \"antd/lib/row\";\nimport _Col from \"antd/lib/col\";\nimport _Button from \"antd/lib/button\";\nvar _jsxFileName = \"E:\\\\Projects\\\\starsofboston\\\\next-django\\\\isomorphic-next\\\\components\\\\Admin\\\\Property\\\\AddProperty.js\";\nvar __jsx = React.createElement;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React from \"react\";\nimport LayoutWrapper from \"@iso/components/utility/layoutWrapper\";\nimport Box from \"@iso/components/utility/box\";\nimport Tabs, { TabPane } from \"@iso/components/uielements/tabs\";\nimport Editor from \"@iso/components/uielements/editor\";\nimport Location from \"@components/Admin/Property/Location/Location\";\nimport basicStyle from \"@iso/assets/styles/constants\";\nimport Setting from \"@components/Admin/Property/Setting/Setting\";\nimport Main from \"@components/Admin/Property/Main/Main\";\nimport Amenity from \"@components/Admin/Property/Amenity/Amenity\";\nimport Rooms from \"@components/Admin/Property/Room/Rooms\";\nimport arrayMove from \"array-move\";\nimport Gallery from \"@components/Admin/Property/Gallery/Gallery\";\nimport FeaturedImage from \"@components/Admin/Property/FeaturedImage/FeaturedImage\";\nimport { useDispatch } from \"react-redux\";\nimport propertyActions from \"@redux/properties/actions\";\n\nfunction uploadCallback(file) {\n  return new Promise((resolve, reject) => {\n    const xhr = new XMLHttpRequest();\n    xhr.open(\"POST\", \"https://api.imgur.com/3/image\");\n    xhr.setRequestHeader(\"Authorization\", \"Client-ID 8d26ccd12712fca\");\n    const data = new FormData();\n    data.append(\"image\", file);\n    xhr.send(data);\n    xhr.addEventListener(\"load\", () => {\n      const response = JSON.parse(xhr.responseText);\n      resolve(response);\n    });\n    xhr.addEventListener(\"error\", () => {\n      const error = JSON.parse(xhr.responseText);\n      reject(error);\n    });\n  });\n}\n\nconst newProperty = {\n  name: \"\",\n  category: \"\",\n  bookervilleId: \"\",\n  description: \"\",\n  neighbourhood: \"\",\n  transit: \"\",\n  address: \"\",\n  lat: \"\",\n  lng: \"\",\n  rooms: [],\n  amenities: [],\n  galleryImgs: [],\n  featuredImg: null,\n  similarProperties: [],\n  price: \"\",\n  minPrice: \"\",\n  minMonthPrice: \"\",\n  bathroomCount: \"\",\n  bedroomCount: \"\",\n  sleeps: \"\",\n  minSleeps: 2,\n  cleaningFee: \"\",\n  transactionFeeRate: \"\",\n  taxRate: \"\",\n  tour360: \"\",\n  refundableAmount: \"\",\n  furnished: true,\n  rentalParking: true,\n  petsConsidered: true\n};\nexport default function AddProperty() {\n  const [state, setState] = React.useState(newProperty);\n  const dispatch = useDispatch();\n  React.useEffect(() => {\n    console.log(\"state\", state);\n  }, [state]);\n\n  function callback(key) {\n    console.log(key);\n  }\n\n  function handleSave() {\n    var _state$featuredImg;\n\n    const property = {\n      bookerville_id: state.bookervilleId,\n      name: state.name,\n      category: state.category,\n      address: state.address,\n      lat: state.lat,\n      lng: state.lng,\n      description: state.description,\n      neighbourhood: state.neighbourhood,\n      transit: state.transit,\n      price: state.price,\n      min_price: state.minPrice,\n      min_month_price: state.minMonthPrice,\n      bedroom_count: state.bedroomCount,\n      bathroom_count: state.bathroomCount,\n      similar_properties: state.similarProperties,\n      sleeps: state.sleeps,\n      min_sleeps: state.minSleeps,\n      cleaning_fee: state.cleaningFee,\n      transactionfee_rate: state.transactionFeeRate,\n      tax_rate: state.taxRate,\n      refundable_amount: state.refundableAmount,\n      tour360: state.tour360,\n      furnished: state.furnished,\n      rental_parking: state.rentalParking,\n      pets_considered: state.petsConsidered,\n      property_rooms: state.rooms.map(room => ({\n        name: room.name,\n        bed_type: room.bedType\n      })),\n      amenities: state.amenities,\n      featured_img: (_state$featuredImg = state.featuredImg) === null || _state$featuredImg === void 0 ? void 0 : _state$featuredImg.id,\n      gallery_imgs: state.galleryImgs.map(image => image.id)\n    };\n    dispatch(propertyActions.addProperty(property));\n  }\n\n  function handleReset() {\n    setState({\n      newProperty\n    });\n  }\n\n  const editorOption = {\n    style: {\n      width: \"90%\",\n      height: \"70%\"\n    },\n    toolbarClassName: \"home-toolbar\",\n    wrapperClassName: \"home-wrapper\",\n    editorClassName: \"home-editor\",\n    // onEditorStateChange: onEditorStateChange,\n    uploadCallback: uploadCallback,\n    toolbar: {\n      image: {\n        uploadCallback: uploadCallback\n      }\n    }\n  };\n\n  function handlePlaceChange(place) {\n    setState(_objectSpread(_objectSpread({}, state), {}, {\n      address: place.formatted_address,\n      lat: place.geometry.location.lat(),\n      lng: place.geometry.location.lng()\n    }));\n  }\n\n  function handlePlaceReset() {\n    setState(_objectSpread(_objectSpread({}, state), {}, {\n      address: \"\",\n      lat: \"\",\n      lng: \"\"\n    }));\n  }\n\n  function handleSettingChange(changedValues, allValues) {\n    console.log(\"handleSettingChange\", changedValues, allValues);\n    setState(_objectSpread(_objectSpread({}, state), allValues));\n  }\n\n  function handleMainInfoChange(changedValues, allValues) {\n    console.log(\"handleMainInfoChange\", changedValues, allValues);\n    setState(_objectSpread(_objectSpread({}, state), allValues));\n  }\n\n  function handleToggleAmenityOption(amenityId) {\n    console.log(\"amenityId\", state.amenities, amenityId);\n    let array = state.amenities;\n    let index = array.indexOf(amenityId);\n\n    if (index > -1) {\n      array.splice(index, 1);\n      setState(_objectSpread(_objectSpread({}, state), {}, {\n        amenities: array\n      }));\n    } else {\n      array.push(amenityId);\n      setState(_objectSpread(_objectSpread({}, state), {}, {\n        amenities: array\n      }));\n    }\n\n    console.log(\"handleToggleAmenityOption\", array, state);\n  }\n\n  function handleAmenityChange(changedValues, allValues) {\n    console.log(\"handleAmenityChange\", changedValues, allValues);\n    const array = [];\n    Object.keys(allValues).map(key => {\n      if (allValues[key]) {\n        array.push(key);\n      }\n    });\n    setState(_objectSpread(_objectSpread({}, state), {}, {\n      amenities: array\n    }));\n  }\n\n  function handleChangeRoom(values, id) {\n    const newRooms = state.rooms.map((room, index) => {\n      if (room.id === id) {\n        return _objectSpread(_objectSpread({}, room), values);\n      }\n\n      return room;\n    });\n    console.log(\"handleChangeRoom\", newRooms);\n    setState(_objectSpread(_objectSpread({}, state), {}, {\n      rooms: newRooms\n    }));\n  }\n\n  function handleAddRoom() {\n    const generatedId = new Date().getTime();\n    console.log(\"array\", array, generatedId);\n    let array = state.rooms;\n    array.push({\n      id: generatedId,\n      name: \"\",\n      bedType: \"Q\"\n    });\n    console.log(\"handleAddRoom\", array);\n    setState(_objectSpread(_objectSpread({}, state), {}, {\n      rooms: array\n    }));\n  }\n\n  function handleRemoveRoom(roomId) {\n    console.log(\"handleRemoveRoom\", roomId);\n    setState(_objectSpread(_objectSpread({}, state), {}, {\n      rooms: state.rooms.filter(room => room.id !== roomId)\n    }));\n  }\n\n  function handleUploadSuccess(image) {\n    const {\n      galleryImgs\n    } = state;\n    galleryImgs.push(image);\n    setState(_objectSpread(_objectSpread({}, state), {}, {\n      galleryImgs\n    }));\n  }\n\n  function handleSortEnd({\n    oldIndex,\n    newIndex\n  }) {\n    setState({\n      galleryImgs: arrayMove(state.galleryImgs, oldIndex, newIndex)\n    });\n  }\n\n  function handleSelectFeatured(image) {\n    setState(_objectSpread(_objectSpread({}, state), {}, {\n      featuredImg: image\n    }));\n  }\n\n  const {\n    rowStyle,\n    colStyle\n  } = basicStyle;\n  return __jsx(LayoutWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 9\n    }\n  }, __jsx(Box, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 13\n    }\n  }, __jsx(_Button, {\n    type: \"primary\",\n    onClick: handleSave,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 17\n    }\n  }, \"Save\"), __jsx(_Button, {\n    type: \"default\",\n    onClick: handleReset,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 17\n    }\n  }, \"Reset\")), __jsx(\"div\", {\n    style: {\n      display: \"flex\",\n      flexFlow: \"row wrap\",\n      alignItems: \"flex-start\",\n      overflow: \"hidden\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 13\n    }\n  }), __jsx(_Row, {\n    style: rowStyle,\n    gutter: 0,\n    justify: \"start\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 13\n    }\n  }, __jsx(_Col, {\n    lg: 8,\n    md: 12,\n    sm: 24,\n    xs: 24,\n    style: colStyle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    style: {\n      margin: \"0 20px\",\n      background: \"#fff\",\n      padding: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 21\n    }\n  }, __jsx(Main, {\n    name: state.name,\n    bookervilleId: state.bookervilleId,\n    category: state.category,\n    onValuesChange: handleMainInfoChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 25\n    }\n  }), __jsx(Gallery, {\n    items: state.galleryImgs,\n    onSortEnd: handleSortEnd,\n    onUploadSuccess: handleUploadSuccess,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 25\n    }\n  }), __jsx(FeaturedImage, {\n    items: state.galleryImgs,\n    selectedItem: state.featuredImg,\n    onUploadSuccess: handleUploadSuccess,\n    onSelectImage: handleSelectFeatured,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 25\n    }\n  }))), __jsx(_Col, {\n    lg: 16,\n    md: 12,\n    sm: 24,\n    xs: 24,\n    style: colStyle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 17\n    }\n  }, __jsx(Tabs, {\n    defaultActiveKey: \"1\",\n    onChange: callback,\n    style: {\n      margin: \"0 20px\",\n      background: \"#fff\",\n      padding: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 21\n    }\n  }, [\"description\", \"neighbourhood\", \"transit\"].map(item => __jsx(TabPane, {\n    tab: item.charAt(0).toUpperCase() + item.slice(1),\n    key: item,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 29\n    }\n  }, __jsx(Editor, _extends({}, editorOption, {\n    onEditorStateChange: html => setState(_objectSpread(_objectSpread({}, state), {}, {\n      [item]: html\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 33\n    }\n  })))), __jsx(TabPane, {\n    tab: \"Location\",\n    key: \"location\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 25\n    }\n  }, __jsx(Location, {\n    address: state.address,\n    center: {\n      lat: state.lat,\n      lng: state.lng\n    },\n    onPlaceChange: handlePlaceChange,\n    onReset: handlePlaceReset,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 29\n    }\n  })), __jsx(TabPane, {\n    tab: \"Setting\",\n    key: \"setting\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 25\n    }\n  }, __jsx(Setting, {\n    setting: state,\n    onValuesChange: handleSettingChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 29\n    }\n  })), __jsx(TabPane, {\n    tab: \"Amenity\",\n    key: \"amenity\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 334,\n      columnNumber: 25\n    }\n  }, __jsx(Amenity, {\n    amenities: [],\n    onValuesChange: handleAmenityChange,\n    onToggleOption: handleToggleAmenityOption,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 29\n    }\n  })), __jsx(TabPane, {\n    tab: \"Bedtype\",\n    key: \"rooms\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 25\n    }\n  }, __jsx(Rooms, {\n    rooms: state.rooms,\n    onRoomChange: handleChangeRoom,\n    onAddRoom: handleAddRoom,\n    onRemoveRoom: handleRemoveRoom,\n    onValuesChange: handleSettingChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 29\n    }\n  }))))));\n}","map":{"version":3,"sources":["E:/Projects/starsofboston/next-django/isomorphic-next/components/Admin/Property/AddProperty.js"],"names":["React","LayoutWrapper","Box","Tabs","TabPane","Editor","Location","basicStyle","Setting","Main","Amenity","Rooms","arrayMove","Gallery","FeaturedImage","useDispatch","propertyActions","uploadCallback","file","Promise","resolve","reject","xhr","XMLHttpRequest","open","setRequestHeader","data","FormData","append","send","addEventListener","response","JSON","parse","responseText","error","newProperty","name","category","bookervilleId","description","neighbourhood","transit","address","lat","lng","rooms","amenities","galleryImgs","featuredImg","similarProperties","price","minPrice","minMonthPrice","bathroomCount","bedroomCount","sleeps","minSleeps","cleaningFee","transactionFeeRate","taxRate","tour360","refundableAmount","furnished","rentalParking","petsConsidered","AddProperty","state","setState","useState","dispatch","useEffect","console","log","callback","key","handleSave","property","bookerville_id","min_price","min_month_price","bedroom_count","bathroom_count","similar_properties","min_sleeps","cleaning_fee","transactionfee_rate","tax_rate","refundable_amount","rental_parking","pets_considered","property_rooms","map","room","bed_type","bedType","featured_img","id","gallery_imgs","image","addProperty","handleReset","editorOption","style","width","height","toolbarClassName","wrapperClassName","editorClassName","toolbar","handlePlaceChange","place","formatted_address","geometry","location","handlePlaceReset","handleSettingChange","changedValues","allValues","handleMainInfoChange","handleToggleAmenityOption","amenityId","array","index","indexOf","splice","push","handleAmenityChange","Object","keys","handleChangeRoom","values","newRooms","handleAddRoom","generatedId","Date","getTime","handleRemoveRoom","roomId","filter","handleUploadSuccess","handleSortEnd","oldIndex","newIndex","handleSelectFeatured","rowStyle","colStyle","display","flexFlow","alignItems","overflow","margin","background","padding","item","charAt","toUpperCase","slice","html"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport LayoutWrapper from \"@iso/components/utility/layoutWrapper\";\r\nimport Box from \"@iso/components/utility/box\";\r\nimport Tabs, {TabPane} from \"@iso/components/uielements/tabs\";\r\nimport Editor from \"@iso/components/uielements/editor\";\r\nimport Location from \"@components/Admin/Property/Location/Location\";\r\nimport basicStyle from \"@iso/assets/styles/constants\";\r\nimport {Row, Col, Button} from \"antd\";\r\nimport Setting from \"@components/Admin/Property/Setting/Setting\";\r\nimport Main from \"@components/Admin/Property/Main/Main\";\r\nimport Amenity from \"@components/Admin/Property/Amenity/Amenity\";\r\nimport Rooms from \"@components/Admin/Property/Room/Rooms\";\r\nimport arrayMove from \"array-move\";\r\nimport Gallery from \"@components/Admin/Property/Gallery/Gallery\";\r\nimport FeaturedImage from \"@components/Admin/Property/FeaturedImage/FeaturedImage\";\r\nimport {useDispatch} from \"react-redux\";\r\nimport propertyActions from \"@redux/properties/actions\";\r\n\r\nfunction uploadCallback(file) {\r\n    return new Promise((resolve, reject) => {\r\n        const xhr = new XMLHttpRequest();\r\n        xhr.open(\"POST\", \"https://api.imgur.com/3/image\");\r\n        xhr.setRequestHeader(\"Authorization\", \"Client-ID 8d26ccd12712fca\");\r\n        const data = new FormData();\r\n        data.append(\"image\", file);\r\n        xhr.send(data);\r\n        xhr.addEventListener(\"load\", () => {\r\n            const response = JSON.parse(xhr.responseText);\r\n            resolve(response);\r\n        });\r\n        xhr.addEventListener(\"error\", () => {\r\n            const error = JSON.parse(xhr.responseText);\r\n            reject(error);\r\n        });\r\n    });\r\n}\r\n\r\nconst newProperty = {\r\n    name: \"\",\r\n    category: \"\",\r\n    bookervilleId: \"\",\r\n    description: \"\",\r\n    neighbourhood: \"\",\r\n    transit: \"\",\r\n    address: \"\",\r\n    lat: \"\",\r\n    lng: \"\",\r\n    rooms: [],\r\n    amenities: [],\r\n    galleryImgs: [],\r\n    featuredImg: null,\r\n    similarProperties: [],\r\n\r\n    price: \"\",\r\n    minPrice: \"\",\r\n    minMonthPrice: \"\",\r\n    bathroomCount: \"\",\r\n    bedroomCount: \"\",\r\n    sleeps: \"\",\r\n    minSleeps: 2,\r\n    cleaningFee: \"\",\r\n    transactionFeeRate: \"\",\r\n    taxRate: \"\",\r\n    tour360: \"\",\r\n    refundableAmount: \"\",\r\n    furnished: true,\r\n    rentalParking: true,\r\n    petsConsidered: true,\r\n};\r\n\r\nexport default function AddProperty() {\r\n    const [state, setState] = React.useState(newProperty);\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    React.useEffect(() => {\r\n        console.log(\"state\", state);\r\n    }, [state]);\r\n\r\n    function callback(key) {\r\n        console.log(key);\r\n    }\r\n\r\n    function handleSave() {\r\n        const property = {\r\n            bookerville_id: state.bookervilleId,\r\n            name: state.name,\r\n            category: state.category,\r\n            address: state.address,\r\n            lat: state.lat,\r\n            lng: state.lng,\r\n            description: state.description,\r\n            neighbourhood: state.neighbourhood,\r\n            transit: state.transit,\r\n            price: state.price,\r\n            min_price: state.minPrice,\r\n            min_month_price: state.minMonthPrice,\r\n            bedroom_count: state.bedroomCount,\r\n            bathroom_count: state.bathroomCount,\r\n            similar_properties: state.similarProperties,\r\n            sleeps: state.sleeps,\r\n            min_sleeps: state.minSleeps,\r\n            cleaning_fee: state.cleaningFee,\r\n            transactionfee_rate: state.transactionFeeRate,\r\n            tax_rate: state.taxRate,\r\n            refundable_amount: state.refundableAmount,\r\n            tour360: state.tour360,\r\n            furnished: state.furnished,\r\n            rental_parking: state.rentalParking,\r\n            pets_considered: state.petsConsidered,\r\n            property_rooms: state.rooms.map((room) => ({\r\n                name: room.name,\r\n                bed_type: room.bedType,\r\n            })),\r\n            amenities: state.amenities,\r\n            featured_img: state.featuredImg?.id,\r\n            gallery_imgs: state.galleryImgs.map((image) => image.id),\r\n        };\r\n        dispatch(propertyActions.addProperty(property));\r\n    }\r\n\r\n    function handleReset() {\r\n        setState({newProperty});\r\n    }\r\n\r\n    const editorOption = {\r\n        style: {width: \"90%\", height: \"70%\"},\r\n        toolbarClassName: \"home-toolbar\",\r\n        wrapperClassName: \"home-wrapper\",\r\n        editorClassName: \"home-editor\",\r\n        // onEditorStateChange: onEditorStateChange,\r\n        uploadCallback: uploadCallback,\r\n        toolbar: {image: {uploadCallback: uploadCallback}},\r\n    };\r\n\r\n    function handlePlaceChange(place) {\r\n        setState({\r\n            ...state,\r\n            address: place.formatted_address,\r\n            lat: place.geometry.location.lat(),\r\n            lng: place.geometry.location.lng(),\r\n        });\r\n    }\r\n\r\n    function handlePlaceReset() {\r\n        setState({\r\n            ...state,\r\n            address: \"\",\r\n            lat: \"\",\r\n            lng: \"\",\r\n        });\r\n    }\r\n\r\n    function handleSettingChange(changedValues, allValues) {\r\n        console.log(\"handleSettingChange\", changedValues, allValues);\r\n        setState({\r\n            ...state,\r\n            ...allValues,\r\n        });\r\n    }\r\n\r\n    function handleMainInfoChange(changedValues, allValues) {\r\n        console.log(\"handleMainInfoChange\", changedValues, allValues);\r\n        setState({\r\n            ...state,\r\n            ...allValues,\r\n        });\r\n    }\r\n\r\n    function handleToggleAmenityOption(amenityId) {\r\n        console.log(\"amenityId\", state.amenities, amenityId);\r\n        let array = state.amenities;\r\n        let index = array.indexOf(amenityId);\r\n        if (index > -1) {\r\n            array.splice(index, 1);\r\n            setState({\r\n                ...state,\r\n                amenities: array,\r\n            });\r\n        } else {\r\n            array.push(amenityId);\r\n            setState({\r\n                ...state,\r\n                amenities: array,\r\n            });\r\n        }\r\n        console.log(\"handleToggleAmenityOption\", array, state);\r\n    }\r\n\r\n    function handleAmenityChange(changedValues, allValues) {\r\n        console.log(\"handleAmenityChange\", changedValues, allValues);\r\n        const array = [];\r\n        Object.keys(allValues).map((key) => {\r\n            if (allValues[key]) {\r\n                array.push(key);\r\n            }\r\n        });\r\n        setState({\r\n            ...state,\r\n            amenities: array,\r\n        });\r\n    }\r\n\r\n    function handleChangeRoom(values, id) {\r\n        const newRooms = state.rooms.map((room, index) => {\r\n            if (room.id === id) {\r\n                return {\r\n                    ...room,\r\n                    ...values,\r\n                };\r\n            }\r\n            return room;\r\n        });\r\n        console.log(\"handleChangeRoom\", newRooms);\r\n        setState({...state, rooms: newRooms});\r\n    }\r\n\r\n    function handleAddRoom() {\r\n        const generatedId = new Date().getTime();\r\n        console.log(\"array\", array, generatedId);\r\n        let array = state.rooms;\r\n        array.push({\r\n            id: generatedId,\r\n            name: \"\",\r\n            bedType: \"Q\",\r\n        });\r\n        console.log(\"handleAddRoom\", array);\r\n        setState({\r\n            ...state,\r\n            rooms: array,\r\n        });\r\n    }\r\n\r\n    function handleRemoveRoom(roomId) {\r\n        console.log(\"handleRemoveRoom\", roomId);\r\n\r\n        setState({\r\n            ...state,\r\n            rooms: state.rooms.filter((room) => room.id !== roomId),\r\n        });\r\n    }\r\n\r\n    function handleUploadSuccess(image) {\r\n        const {galleryImgs} = state;\r\n        galleryImgs.push(image);\r\n        setState({...state, galleryImgs});\r\n    }\r\n\r\n    function handleSortEnd({oldIndex, newIndex}) {\r\n        setState({\r\n            galleryImgs: arrayMove(state.galleryImgs, oldIndex, newIndex),\r\n        });\r\n    }\r\n\r\n    function handleSelectFeatured(image) {\r\n        setState({...state, featuredImg: image});\r\n    }\r\n\r\n    const {rowStyle, colStyle} = basicStyle;\r\n\r\n    return (\r\n        <LayoutWrapper>\r\n            <Box>\r\n                <Button type=\"primary\" onClick={handleSave}>\r\n                    Save\r\n                </Button>\r\n                <Button type=\"default\" onClick={handleReset}>\r\n                    Reset\r\n                </Button>\r\n            </Box>\r\n            <div\r\n                style={{\r\n                    display: \"flex\",\r\n                    flexFlow: \"row wrap\",\r\n                    alignItems: \"flex-start\",\r\n                    overflow: \"hidden\",\r\n                }}\r\n            ></div>\r\n            <Row style={rowStyle} gutter={0} justify=\"start\">\r\n                <Col lg={8} md={12} sm={24} xs={24} style={colStyle}>\r\n                    <div style={{margin: \"0 20px\", background: \"#fff\", padding: 20}}>\r\n                        <Main\r\n                            name={state.name}\r\n                            bookervilleId={state.bookervilleId}\r\n                            category={state.category}\r\n                            onValuesChange={handleMainInfoChange}\r\n                        />\r\n                        <Gallery\r\n                            items={state.galleryImgs}\r\n                            onSortEnd={handleSortEnd}\r\n                            onUploadSuccess={handleUploadSuccess}\r\n                        />\r\n                        <FeaturedImage\r\n                            items={state.galleryImgs}\r\n                            selectedItem={state.featuredImg}\r\n                            onUploadSuccess={handleUploadSuccess}\r\n                            onSelectImage={handleSelectFeatured}\r\n                        />\r\n                    </div>\r\n                </Col>\r\n                <Col lg={16} md={12} sm={24} xs={24} style={colStyle}>\r\n                    <Tabs\r\n                        defaultActiveKey=\"1\"\r\n                        onChange={callback}\r\n                        style={{margin: \"0 20px\", background: \"#fff\", padding: 20}}\r\n                    >\r\n                        {[\"description\", \"neighbourhood\", \"transit\"].map((item) => (\r\n                            <TabPane\r\n                                tab={item.charAt(0).toUpperCase() + item.slice(1)}\r\n                                key={item}\r\n                            >\r\n                                <Editor\r\n                                    {...editorOption}\r\n                                    onEditorStateChange={(html) =>\r\n                                        setState({...state, [item]: html})\r\n                                    }\r\n                                />\r\n                            </TabPane>\r\n                        ))}\r\n                        <TabPane tab=\"Location\" key=\"location\">\r\n                            <Location\r\n                                address={state.address}\r\n                                center={{\r\n                                    lat: state.lat,\r\n                                    lng: state.lng,\r\n                                }}\r\n                                onPlaceChange={handlePlaceChange}\r\n                                onReset={handlePlaceReset}\r\n                            />\r\n                        </TabPane>\r\n                        <TabPane tab=\"Setting\" key=\"setting\">\r\n                            <Setting setting={state} onValuesChange={handleSettingChange}/>\r\n                        </TabPane>\r\n                        <TabPane tab=\"Amenity\" key=\"amenity\">\r\n                            <Amenity\r\n                                amenities={[]}\r\n                                onValuesChange={handleAmenityChange}\r\n                                onToggleOption={handleToggleAmenityOption}\r\n                            />\r\n                        </TabPane>\r\n                        <TabPane tab=\"Bedtype\" key=\"rooms\">\r\n                            <Rooms\r\n                                rooms={state.rooms}\r\n                                onRoomChange={handleChangeRoom}\r\n                                onAddRoom={handleAddRoom}\r\n                                onRemoveRoom={handleRemoveRoom}\r\n                                onValuesChange={handleSettingChange}\r\n                            />\r\n                        </TabPane>\r\n                    </Tabs>\r\n                </Col>\r\n            </Row>\r\n        </LayoutWrapper>\r\n    );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}