{"ast":null,"code":"import _Row from \"antd/lib/row\";\nimport _Button from \"antd/lib/button\";\nimport _Col from \"antd/lib/col\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useContext } from 'react';\nimport Router, { withRouter } from 'next/router';\nimport { FaRegCalendar, FaUserFriends } from 'react-icons/fa';\nimport { FormWrapper, ComponentWrapper, GuestWrapper, ItemWrapper } from './Search.style';\nimport { SearchContext } from \"@context/SearchProvider\";\nimport DateRangePickerBox from \"@iso/components/DatePicker/ReactDates\";\nimport ViewWithPopup from \"@components/Common/ViewWithPopup/ViewWithPopup\";\nimport InputIncDec from \"@components/Common/InputIncDec/InputIncDec\";\nimport ReactGA from \"react-ga\";\nimport { PIXEL_ID } from \"../../../../env-config\";\nvar calendarItem = {\n  separator: '-',\n  format: 'YYYY-MM-DD',\n  locale: 'en'\n};\n\nvar SearchForm = function SearchForm() {\n  var _useContext = useContext(SearchContext),\n      state = _useContext.state,\n      dispatch = _useContext.dispatch;\n\n  var _useState = useState({\n    setStartDate: null,\n    setEndDate: null\n  }),\n      searchDate = _useState[0],\n      setSearchDate = _useState[1];\n\n  var _useState2 = useState({\n    children: 0,\n    adults: 0\n  }),\n      guest = _useState2[0],\n      setGuest = _useState2[1];\n\n  var handleIncrement = function handleIncrement(type) {\n    setGuest(_objectSpread(_objectSpread({}, guest), {}, _defineProperty({}, type, parseInt(guest[type]) + 1)));\n  };\n\n  var handleDecrement = function handleDecrement(type) {\n    if (guest[type] <= 0) {\n      return false;\n    }\n\n    setGuest(_objectSpread(_objectSpread({}, guest), {}, _defineProperty({}, type, parseInt(guest[type]) - 1)));\n  };\n\n  var handleIncDecOnChnage = function handleIncDecOnChnage(e, type) {\n    var currentValue = e.target.value;\n    setGuest(_objectSpread(_objectSpread({}, guest), {}, _defineProperty({}, type, parseInt(currentValue))));\n  };\n\n  var goToListingPage = function goToListingPage() {\n    ReactGA.event({\n      category: 'engagement',\n      action: 'browse',\n      label: 'browse rentals'\n    });\n    import('react-facebook-pixel').then(function (x) {\n      return x[\"default\"];\n    }).then(function (ReactPixel) {\n      ReactPixel.init(PIXEL_ID);\n      ReactPixel.track('Search');\n    });\n    dispatch({\n      type: 'UPDATE_QUERY',\n      payload: _objectSpread(_objectSpread({}, state), {}, {\n        checkin_date: null,\n        checkout_date: null,\n        children: null,\n        adults: null\n      })\n    });\n    Router.push({\n      pathname: \"/listing\"\n    }, {\n      pathname: \"/listing\"\n    }, {\n      shallow: true\n    });\n  };\n\n  var goToFilteredListingPage = function goToFilteredListingPage() {\n    ReactGA.event({\n      category: 'engagement',\n      action: 'search',\n      label: 'search rentals'\n    });\n    ReactGA.event({\n      category: 'engagement',\n      action: 'view_search_results',\n      label: 'view rentals search results'\n    });\n    var query = {\n      checkin_date: searchDate.setStartDate,\n      checkout_date: searchDate.setEndDate,\n      adults: guest.adults,\n      children: guest.children\n    };\n\n    for (var key in query) {\n      if (query[key] === '' || query[key] === null || query[key] === 0) {\n        delete query[key];\n      }\n    }\n\n    dispatch({\n      type: 'UPDATE_QUERY',\n      payload: _objectSpread(_objectSpread({}, state), query)\n    });\n    Router.push({\n      pathname: \"/listing\",\n      query: query\n    }, {\n      pathname: \"/listing\",\n      query: query\n    }, {\n      shallow: true\n    });\n  };\n\n  return __jsx(FormWrapper, null, __jsx(_Row, {\n    gutter: 32\n  }, __jsx(_Col, {\n    lg: 8,\n    sm: 24\n  }, __jsx(ComponentWrapper, null, __jsx(FaRegCalendar, {\n    className: \"calendar\"\n  }), __jsx(DateRangePickerBox, {\n    startDatePlaceholderText: \"Check In\",\n    endDatePlaceholderText: \"Check Out\",\n    item: calendarItem,\n    startDateId: \"startDateId-id-home\",\n    endDateId: \"endDateId-id-home\",\n    updateSearchData: function updateSearchData(setDateValue) {\n      return setSearchDate(setDateValue);\n    },\n    showClearDates: true,\n    small: true,\n    numberOfMonths: 1\n  }))), __jsx(_Col, {\n    lg: 8,\n    sm: 24\n  }, __jsx(ComponentWrapper, null, __jsx(FaUserFriends, {\n    className: \"user-friends\"\n  }), __jsx(ViewWithPopup, {\n    key: 200,\n    noView: true,\n    className: \"children_adults\",\n    view: __jsx(_Button, {\n      type: \"default\"\n    }, __jsx(\"span\", null, \"Adults \", guest.children > 0 && \": \".concat(guest.children)), __jsx(\"span\", null, \"-\"), __jsx(\"span\", null, \"Children\", guest.adults > 0 && \": \".concat(guest.adults))),\n    popup: __jsx(GuestWrapper, null, __jsx(ItemWrapper, null, __jsx(\"strong\", null, \"Adults\"), __jsx(InputIncDec, {\n      id: \"adults\",\n      increment: function increment() {\n        return handleIncrement('adults');\n      },\n      decrement: function decrement() {\n        return handleDecrement('adults');\n      },\n      onChange: function onChange(e) {\n        return handleIncDecOnChnage(e, 'adults');\n      },\n      value: guest.adults\n    })), __jsx(ItemWrapper, null, __jsx(\"strong\", null, \"Children\"), __jsx(InputIncDec, {\n      id: \"children\",\n      increment: function increment() {\n        return handleIncrement('children');\n      },\n      decrement: function decrement() {\n        return handleDecrement('children');\n      },\n      onChange: function onChange(e) {\n        return handleIncDecOnChnage(e, 'children');\n      },\n      value: guest.children\n    })))\n  }))), __jsx(_Col, {\n    lg: 8,\n    sm: 24\n  }, __jsx(\"div\", {\n    className: \"search-form-buttons\"\n  }, __jsx(_Button, {\n    type: \"secondary\",\n    htmlType: \"submit\",\n    size: \"large\",\n    onClick: goToFilteredListingPage\n  }, \"Search\"), __jsx(_Button, {\n    type: \"secondary\",\n    htmlType: \"submit\",\n    size: \"large\",\n    onClick: goToListingPage\n  }, \"Browse All Rentals\")))));\n};\n\nexport default withRouter(SearchForm);","map":null,"metadata":{},"sourceType":"module"}