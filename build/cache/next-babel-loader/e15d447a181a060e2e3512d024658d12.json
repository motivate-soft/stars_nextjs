{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nvar _marked = /*#__PURE__*/_regeneratorRuntime.mark(getAllProperties),\n    _marked2 = /*#__PURE__*/_regeneratorRuntime.mark(getProperty),\n    _marked3 = /*#__PURE__*/_regeneratorRuntime.mark(addProperty),\n    _marked4 = /*#__PURE__*/_regeneratorRuntime.mark(updateProperty),\n    _marked5 = /*#__PURE__*/_regeneratorRuntime.mark(deleteProperty),\n    _marked6 = /*#__PURE__*/_regeneratorRuntime.mark(getPriceItems),\n    _marked7 = /*#__PURE__*/_regeneratorRuntime.mark(createPriceItem),\n    _marked8 = /*#__PURE__*/_regeneratorRuntime.mark(rootSaga);\n\nimport { all, takeEvery, fork, takeLatest, call, put } from \"redux-saga/effects\";\nimport actions from \"./actions\";\nimport { notification } from \"@iso/components\";\nimport propertyApi from \"../../service/propertyApi\";\nimport { Router } from \"next/router\";\nexport function getAllProperties() {\n  return _regeneratorRuntime.wrap(function getAllProperties$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.next = 2;\n          return takeLatest(actions.GET_ALL_PROPERTIES_REQUEST, /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n            var res;\n            return _regeneratorRuntime.wrap(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    _context.prev = 0;\n                    _context.next = 3;\n                    return call(propertyApi.getAll);\n\n                  case 3:\n                    res = _context.sent;\n                    console.log(\"___try\", res);\n                    _context.next = 7;\n                    return put({\n                      type: actions.GET_ALL_PROPERTIES_SUCCESS,\n                      items: res\n                    });\n\n                  case 7:\n                    _context.next = 14;\n                    break;\n\n                  case 9:\n                    _context.prev = 9;\n                    _context.t0 = _context[\"catch\"](0);\n                    console.log(\"___catch\", _context.t0);\n                    _context.next = 14;\n                    return put({\n                      type: actions.GET_ALL_PROPERTIES_FAILURE,\n                      error: _context.t0.message\n                    });\n\n                  case 14:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            }, _callee, null, [[0, 9]]);\n          }));\n\n        case 2:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked);\n}\nexport function getProperty() {\n  return _regeneratorRuntime.wrap(function getProperty$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.next = 2;\n          return takeEvery(actions.GET_PROPERTY_REQUEST, /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(payload) {\n            var res;\n            return _regeneratorRuntime.wrap(function _callee2$(_context3) {\n              while (1) {\n                switch (_context3.prev = _context3.next) {\n                  case 0:\n                    _context3.prev = 0;\n                    _context3.next = 3;\n                    return call(propertyApi.getOne, payload.propertyId);\n\n                  case 3:\n                    res = _context3.sent;\n                    _context3.next = 6;\n                    return put({\n                      type: actions.GET_PROPERTY_SUCCESS,\n                      item: res\n                    });\n\n                  case 6:\n                    _context3.next = 13;\n                    break;\n\n                  case 8:\n                    _context3.prev = 8;\n                    _context3.t0 = _context3[\"catch\"](0);\n                    notification('warning', _context3.t0.message);\n                    _context3.next = 13;\n                    return put({\n                      type: actions.GET_PROPERTY_FAILURE,\n                      error: _context3.t0.message\n                    });\n\n                  case 13:\n                  case \"end\":\n                    return _context3.stop();\n                }\n              }\n            }, _callee2, null, [[0, 8]]);\n          }));\n\n        case 2:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, _marked2);\n}\nexport function addProperty() {\n  return _regeneratorRuntime.wrap(function addProperty$(_context6) {\n    while (1) {\n      switch (_context6.prev = _context6.next) {\n        case 0:\n          _context6.next = 2;\n          return takeEvery(actions.ADD_PROPERTY_REQUEST, /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(payload) {\n            var res;\n            return _regeneratorRuntime.wrap(function _callee3$(_context5) {\n              while (1) {\n                switch (_context5.prev = _context5.next) {\n                  case 0:\n                    _context5.prev = 0;\n                    _context5.next = 3;\n                    return call(propertyApi.add, payload.property);\n\n                  case 3:\n                    res = _context5.sent;\n                    notification('success', 'New Property has been created successfully');\n                    _context5.next = 7;\n                    return put({\n                      type: actions.ADD_PROPERTY_SUCCESS,\n                      item: res\n                    });\n\n                  case 7:\n                    _context5.next = 14;\n                    break;\n\n                  case 9:\n                    _context5.prev = 9;\n                    _context5.t0 = _context5[\"catch\"](0);\n                    notification('warning', _context5.t0.message);\n                    _context5.next = 14;\n                    return put({\n                      type: actions.ADD_PROPERTY_FAILURE,\n                      error: _context5.t0.message\n                    });\n\n                  case 14:\n                  case \"end\":\n                    return _context5.stop();\n                }\n              }\n            }, _callee3, null, [[0, 9]]);\n          }));\n\n        case 2:\n        case \"end\":\n          return _context6.stop();\n      }\n    }\n  }, _marked3);\n}\nexport function updateProperty() {\n  return _regeneratorRuntime.wrap(function updateProperty$(_context8) {\n    while (1) {\n      switch (_context8.prev = _context8.next) {\n        case 0:\n          _context8.next = 2;\n          return takeEvery(actions.UPDATE_PROPERTY_REQUEST, /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(payload) {\n            var res;\n            return _regeneratorRuntime.wrap(function _callee4$(_context7) {\n              while (1) {\n                switch (_context7.prev = _context7.next) {\n                  case 0:\n                    _context7.prev = 0;\n                    _context7.next = 3;\n                    return call(propertyApi.update, payload.property);\n\n                  case 3:\n                    res = _context7.sent;\n                    notification('success', 'Property has been updated successfully');\n                    _context7.next = 7;\n                    return put({\n                      type: actions.UPDATE_PROPERTY_SUCCESS,\n                      item: res\n                    });\n\n                  case 7:\n                    _context7.next = 14;\n                    break;\n\n                  case 9:\n                    _context7.prev = 9;\n                    _context7.t0 = _context7[\"catch\"](0);\n                    notification('warning', _context7.t0.message);\n                    _context7.next = 14;\n                    return put({\n                      type: actions.UPDATE_PROPERTY_FAILURE,\n                      error: _context7.t0.message\n                    });\n\n                  case 14:\n                  case \"end\":\n                    return _context7.stop();\n                }\n              }\n            }, _callee4, null, [[0, 9]]);\n          }));\n\n        case 2:\n        case \"end\":\n          return _context8.stop();\n      }\n    }\n  }, _marked4);\n}\nexport function deleteProperty() {\n  return _regeneratorRuntime.wrap(function deleteProperty$(_context10) {\n    while (1) {\n      switch (_context10.prev = _context10.next) {\n        case 0:\n          _context10.next = 2;\n          return takeEvery(actions.DELETE_PROPERTY_REQUEST, /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(payload) {\n            return _regeneratorRuntime.wrap(function _callee5$(_context9) {\n              while (1) {\n                switch (_context9.prev = _context9.next) {\n                  case 0:\n                    _context9.prev = 0;\n                    _context9.next = 3;\n                    return call(propertyApi[\"delete\"], payload.propertyId);\n\n                  case 3:\n                    notification('success', 'Property has been deleted successfully');\n                    Router.push('/admin/property');\n                    _context9.next = 7;\n                    return put({\n                      type: actions.DELETE_PROPERTY_SUCCESS,\n                      propertyId: payload.propertyId\n                    });\n\n                  case 7:\n                    _context9.next = 14;\n                    break;\n\n                  case 9:\n                    _context9.prev = 9;\n                    _context9.t0 = _context9[\"catch\"](0);\n                    notification('warning', _context9.t0.message);\n                    _context9.next = 14;\n                    return put({\n                      type: actions.DELETE_PROPERTY_FAILURE,\n                      error: _context9.t0.message\n                    });\n\n                  case 14:\n                  case \"end\":\n                    return _context9.stop();\n                }\n              }\n            }, _callee5, null, [[0, 9]]);\n          }));\n\n        case 2:\n        case \"end\":\n          return _context10.stop();\n      }\n    }\n  }, _marked5);\n}\nexport function getPriceItems() {\n  return _regeneratorRuntime.wrap(function getPriceItems$(_context12) {\n    while (1) {\n      switch (_context12.prev = _context12.next) {\n        case 0:\n          _context12.next = 2;\n          return takeLatest(actions.GET_PRICE_ITEMS_REQUEST, /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(payload) {\n            var res;\n            return _regeneratorRuntime.wrap(function _callee6$(_context11) {\n              while (1) {\n                switch (_context11.prev = _context11.next) {\n                  case 0:\n                    _context11.prev = 0;\n                    _context11.next = 3;\n                    return call(propertyApi.getPriceItems, payload.propertyId);\n\n                  case 3:\n                    res = _context11.sent;\n                    _context11.next = 6;\n                    return put({\n                      type: actions.GET_PRICE_ITEMS_SUCCESS,\n                      items: res\n                    });\n\n                  case 6:\n                    _context11.next = 13;\n                    break;\n\n                  case 8:\n                    _context11.prev = 8;\n                    _context11.t0 = _context11[\"catch\"](0);\n                    notification('warning', _context11.t0.message);\n                    _context11.next = 13;\n                    return put({\n                      type: actions.GET_PRICE_ITEMS_FAILURE,\n                      error: _context11.t0.message\n                    });\n\n                  case 13:\n                  case \"end\":\n                    return _context11.stop();\n                }\n              }\n            }, _callee6, null, [[0, 8]]);\n          }));\n\n        case 2:\n        case \"end\":\n          return _context12.stop();\n      }\n    }\n  }, _marked6);\n}\nexport function createPriceItem() {\n  return _regeneratorRuntime.wrap(function createPriceItem$(_context14) {\n    while (1) {\n      switch (_context14.prev = _context14.next) {\n        case 0:\n          _context14.next = 2;\n          return takeLatest(actions.CREATE_PRICE_ITEM_REQUEST, /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(payload) {\n            var res;\n            return _regeneratorRuntime.wrap(function _callee7$(_context13) {\n              while (1) {\n                switch (_context13.prev = _context13.next) {\n                  case 0:\n                    _context13.prev = 0;\n                    _context13.next = 3;\n                    return call(propertyApi.createPriceItem, payload.pricing);\n\n                  case 3:\n                    res = _context13.sent;\n                    _context13.next = 6;\n                    return put({\n                      type: actions.CREATE_PRICE_ITEM_SUCCESS\n                    });\n\n                  case 6:\n                    notification('success', 'Pricing item created');\n                    _context13.next = 9;\n                    return put({\n                      type: actions.GET_PRICE_ITEMS_REQUEST,\n                      propertyId: payload.pricing.property\n                    });\n\n                  case 9:\n                    _context13.next = 16;\n                    break;\n\n                  case 11:\n                    _context13.prev = 11;\n                    _context13.t0 = _context13[\"catch\"](0);\n                    notification('warning', _context13.t0.message);\n                    _context13.next = 16;\n                    return put({\n                      type: actions.CREATE_PRICE_ITEM_FAILURE\n                    });\n\n                  case 16:\n                  case \"end\":\n                    return _context13.stop();\n                }\n              }\n            }, _callee7, null, [[0, 11]]);\n          }));\n\n        case 2:\n        case \"end\":\n          return _context14.stop();\n      }\n    }\n  }, _marked7);\n}\nexport default function rootSaga() {\n  return _regeneratorRuntime.wrap(function rootSaga$(_context15) {\n    while (1) {\n      switch (_context15.prev = _context15.next) {\n        case 0:\n          _context15.next = 2;\n          return all([call(getAllProperties), fork(getProperty), fork(addProperty), fork(updateProperty), fork(deleteProperty), fork(getPriceItems), fork(createPriceItem)]);\n\n        case 2:\n        case \"end\":\n          return _context15.stop();\n      }\n    }\n  }, _marked8);\n}","map":{"version":3,"sources":["E:/Projects/starsofboston/next-django/isomorphic-next/redux/properties/saga.js"],"names":["getAllProperties","getProperty","addProperty","updateProperty","deleteProperty","getPriceItems","createPriceItem","rootSaga","all","takeEvery","fork","takeLatest","call","put","actions","notification","propertyApi","Router","GET_ALL_PROPERTIES_REQUEST","getAll","res","console","log","type","GET_ALL_PROPERTIES_SUCCESS","items","GET_ALL_PROPERTIES_FAILURE","error","message","GET_PROPERTY_REQUEST","payload","getOne","propertyId","GET_PROPERTY_SUCCESS","item","GET_PROPERTY_FAILURE","ADD_PROPERTY_REQUEST","add","property","ADD_PROPERTY_SUCCESS","ADD_PROPERTY_FAILURE","UPDATE_PROPERTY_REQUEST","update","UPDATE_PROPERTY_SUCCESS","UPDATE_PROPERTY_FAILURE","DELETE_PROPERTY_REQUEST","push","DELETE_PROPERTY_SUCCESS","DELETE_PROPERTY_FAILURE","GET_PRICE_ITEMS_REQUEST","GET_PRICE_ITEMS_SUCCESS","GET_PRICE_ITEMS_FAILURE","CREATE_PRICE_ITEM_REQUEST","pricing","CREATE_PRICE_ITEM_SUCCESS","CREATE_PRICE_ITEM_FAILURE"],"mappings":"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","sourcesContent":["import {\n    all,\n    takeEvery,\n    fork,\n    takeLatest,\n    call,\n    put,\n} from \"redux-saga/effects\";\nimport actions from \"./actions\";\nimport {notification} from \"@iso/components\";\nimport propertyApi from \"../../service/propertyApi\";\nimport {Router} from \"next/router\";\n\nexport function* getAllProperties() {\n    yield takeLatest(actions.GET_ALL_PROPERTIES_REQUEST, function* () {\n        try {\n            const res = yield call(propertyApi.getAll);\n            console.log(\"___try\", res);\n            yield put({\n                type: actions.GET_ALL_PROPERTIES_SUCCESS,\n                items: res,\n            });\n        } catch (error) {\n            console.log(\"___catch\", error);\n            yield put({\n                type: actions.GET_ALL_PROPERTIES_FAILURE,\n                error: error.message,\n            });\n        }\n    });\n}\n\nexport function* getProperty() {\n    yield takeEvery(actions.GET_PROPERTY_REQUEST, function* (payload) {\n        try {\n            const res = yield call(propertyApi.getOne, payload.propertyId);\n            yield put({\n                type: actions.GET_PROPERTY_SUCCESS,\n                item: res,\n            });\n        } catch (error) {\n            notification('warning', error.message)\n            yield put({\n                type: actions.GET_PROPERTY_FAILURE,\n                error: error.message,\n            });\n        }\n    });\n}\n\nexport function* addProperty() {\n    yield takeEvery(actions.ADD_PROPERTY_REQUEST, function* (payload) {\n        try {\n            const res = yield call(propertyApi.add, payload.property);\n            notification('success', 'New Property has been created successfully')\n\n            yield put({\n                type: actions.ADD_PROPERTY_SUCCESS,\n                item: res,\n            });\n        } catch (error) {\n            notification('warning', error.message)\n            yield put({\n                type: actions.ADD_PROPERTY_FAILURE,\n                error: error.message,\n            });\n        }\n    });\n}\n\nexport function* updateProperty() {\n    yield takeEvery(actions.UPDATE_PROPERTY_REQUEST, function* (payload) {\n        try {\n            const res = yield call(propertyApi.update, payload.property);\n            notification('success', 'Property has been updated successfully')\n            yield put({\n                type: actions.UPDATE_PROPERTY_SUCCESS,\n                item: res,\n            });\n        } catch (error) {\n            notification('warning', error.message)\n            yield put({\n                type: actions.UPDATE_PROPERTY_FAILURE,\n                error: error.message,\n            });\n        }\n    });\n}\n\nexport function* deleteProperty() {\n    yield takeEvery(actions.DELETE_PROPERTY_REQUEST, function* (payload) {\n        try {\n            yield call(propertyApi.delete, payload.propertyId);\n            notification('success', 'Property has been deleted successfully')\n\n            Router.push('/admin/property')\n            yield put({\n                type: actions.DELETE_PROPERTY_SUCCESS,\n                propertyId: payload.propertyId,\n            });\n        } catch (error) {\n            notification('warning', error.message)\n            yield put({\n                type: actions.DELETE_PROPERTY_FAILURE,\n                error: error.message,\n            });\n        }\n    });\n}\n\nexport function* getPriceItems() {\n    yield takeLatest(actions.GET_PRICE_ITEMS_REQUEST, function* (payload) {\n        try {\n            const res = yield call(propertyApi.getPriceItems, payload.propertyId);\n            yield put({\n                type: actions.GET_PRICE_ITEMS_SUCCESS,\n                items: res,\n            });\n        } catch (error) {\n            notification('warning', error.message)\n            yield put({\n                type: actions.GET_PRICE_ITEMS_FAILURE,\n                error: error.message,\n            });\n        }\n    });\n}\n\nexport function* createPriceItem() {\n    yield takeLatest(actions.CREATE_PRICE_ITEM_REQUEST, function* (payload) {\n        try {\n            const res = yield call(propertyApi.createPriceItem, payload.pricing);\n            yield put({\n                type: actions.CREATE_PRICE_ITEM_SUCCESS,\n            });\n            notification('success', 'Pricing item created')\n            yield put({\n                type: actions.GET_PRICE_ITEMS_REQUEST,\n                propertyId: payload.pricing.property\n            })\n        } catch (error) {\n            notification('warning', error.message)\n            yield put({\n                type: actions.CREATE_PRICE_ITEM_FAILURE,\n            });\n        }\n    });\n}\n\nexport default function* rootSaga() {\n    yield all([\n        call(getAllProperties),\n        fork(getProperty),\n        fork(addProperty),\n        fork(updateProperty),\n        fork(deleteProperty),\n        fork(getPriceItems),\n        fork(createPriceItem),\n    ]);\n}\n"]},"metadata":{},"sourceType":"module"}