{"ast":null,"code":"var _jsxFileName = \"E:\\\\Projects\\\\starsofboston\\\\next-django\\\\isomorphic-next\\\\components\\\\Admin\\\\Property\\\\Dropzone\\\\Dropzone.js\";\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport Dropzone from \"@iso/components/uielements/dropzone\";\nimport { notification } from \"@iso/components\";\nimport Box from \"@iso/components/utility/box\";\nimport LayoutWrapper from \"@iso/components/utility/layoutWrapper\";\nimport ContentHolder from \"@iso/components/utility/contentHolder\";\nimport DropzoneWrapper from \"./Dropzone.styles\";\nimport { getCookie } from \"@redux/authentication/auth.utils\";\nimport { BACKEND_URL } from \"env-config\";\nexport default (props => {\n  const {\n    onUploadSuccess\n  } = props;\n  const componentConfig = {\n    iconFiletypes: [\".jpg\", \".png\", \".gif\"],\n    method: true,\n    showFiletypeIcon: true,\n    uploadMultiple: false,\n    maxFilesize: 2,\n    // MB\n    maxFiles: 2,\n    dictMaxFilesExceeded: \"You can only upload upto 2 images\",\n    dictRemoveFile: \"Delete\",\n    dictCancelUploadConfirmation: \"Are you sure to cancel upload?\",\n    postUrl: \"no-url\"\n  };\n  const djsConfig = {\n    autoProcessQueue: false\n  };\n  const eventHandlers = {\n    addedfile: file => onAddedFile(file),\n    success: file => notification(\"success\", `${file.name} successfully uploaded`),\n    error: error => notification(\"error\", \"Server is not set in the demo\")\n  };\n\n  async function onAddedFile(file) {\n    notification(\"success\", `${file.name} added`);\n    const body = new FormData();\n    body.append(\"file\", file);\n    const res = await fetch(`${BACKEND_URL}/api/media/create`, {\n      method: \"POST\",\n      headers: {\n        Authorization: \"Bearer \" + getCookie(\"token\")\n      },\n      body\n    }).then(res => res.json()).then(res => res).catch(error => error);\n    onUploadSuccess(res);\n  } // async function handleAddImage(selectedFiles) {\n  //   if (selectedFiles[0].size > 1024 * 1024 * 10) {\n  //     setError(\"You can only upload files smaller than 10MB.\");\n  //     return;\n  //   }\n  //   if (selectedFiles[0].type.indexOf(\"image\") === -1) {\n  //     setError(\"You can only upload image files.\");\n  //     return;\n  //   }\n  //   let files = new FormData();\n  //   files.append(\"fileToUpload\", selectedFiles[0]);\n  //   setIsUploadingAttachment(true);\n  //   try {\n  //     const response = await postFile(\n  //       `/api/v2/services/${activeService.id}/image`,\n  //       files\n  //     );\n  //     const { imagePath } = response;\n  //     const newServices = services.map((service) => {\n  //       if (service.id === activeService.id) {\n  //         service.imagePath = imagePath;\n  //       }\n  //       return service;\n  //     });\n  //     onImageChange(newServices);\n  //     setIsUploadingAttachment(false);\n  //   } catch (errorMessage) {\n  //     setError(errorMessage);\n  //     setIsUploadingAttachment(false);\n  //   }\n  // }\n  // async function handleDeleteImage() {\n  //   setIsDeletingAttachment(true);\n  //   setError(null);\n  //   try {\n  //     await remove(`/api/v2/services/${activeService.id}/image`);\n  //     const newServices = services.map((service) => {\n  //       if (service.id === activeService.id) {\n  //         service.imagePath = null;\n  //       }\n  //       return service;\n  //     });\n  //     setIsDeletingAttachment(false);\n  //     onImageChange(newServices);\n  //   } catch (errorMessage) {\n  //     setIsDeletingAttachment(false);\n  //     setError(\n  //       \"There was an error deleting this file, please try again. If the problem persists, please contact us.\"\n  //     );\n  //   }\n  // }\n\n\n  return __jsx(LayoutWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 5\n    }\n  }, __jsx(Box, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }\n  }, __jsx(ContentHolder, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 9\n    }\n  }, __jsx(DropzoneWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 11\n    }\n  }, __jsx(Dropzone, {\n    config: componentConfig,\n    eventHandlers: eventHandlers,\n    djsConfig: djsConfig,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }\n  })))));\n});","map":{"version":3,"sources":["E:/Projects/starsofboston/next-django/isomorphic-next/components/Admin/Property/Dropzone/Dropzone.js"],"names":["React","Dropzone","notification","Box","LayoutWrapper","ContentHolder","DropzoneWrapper","getCookie","BACKEND_URL","props","onUploadSuccess","componentConfig","iconFiletypes","method","showFiletypeIcon","uploadMultiple","maxFilesize","maxFiles","dictMaxFilesExceeded","dictRemoveFile","dictCancelUploadConfirmation","postUrl","djsConfig","autoProcessQueue","eventHandlers","addedfile","file","onAddedFile","success","name","error","body","FormData","append","res","fetch","headers","Authorization","then","json","catch"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Dropzone from \"@iso/components/uielements/dropzone\";\nimport { notification } from \"@iso/components\";\nimport Box from \"@iso/components/utility/box\";\nimport LayoutWrapper from \"@iso/components/utility/layoutWrapper\";\nimport ContentHolder from \"@iso/components/utility/contentHolder\";\nimport DropzoneWrapper from \"./Dropzone.styles\";\nimport { getCookie } from \"@redux/authentication/auth.utils\";\nimport { BACKEND_URL } from \"env-config\";\n\nexport default (props) => {\n  const { onUploadSuccess } = props;\n\n  const componentConfig = {\n    iconFiletypes: [\".jpg\", \".png\", \".gif\"],\n    method: true,\n    showFiletypeIcon: true,\n    uploadMultiple: false,\n    maxFilesize: 2, // MB\n    maxFiles: 2,\n    dictMaxFilesExceeded: \"You can only upload upto 2 images\",\n    dictRemoveFile: \"Delete\",\n    dictCancelUploadConfirmation: \"Are you sure to cancel upload?\",\n    postUrl: \"no-url\",\n  };\n  const djsConfig = { autoProcessQueue: false };\n  const eventHandlers = {\n    addedfile: (file) => onAddedFile(file),\n    success: (file) =>\n      notification(\"success\", `${file.name} successfully uploaded`),\n    error: (error) => notification(\"error\", \"Server is not set in the demo\"),\n  };\n\n  async function onAddedFile(file) {\n    notification(\"success\", `${file.name} added`);\n    const body = new FormData();\n    body.append(\"file\", file);\n\n    const res = await fetch(`${BACKEND_URL}/api/media/create`, {\n      method: \"POST\",\n      headers: {\n        Authorization: \"Bearer \" + getCookie(\"token\"),\n      },\n      body,\n    })\n      .then((res) => res.json())\n      .then((res) => res)\n      .catch((error) => error);\n    onUploadSuccess(res);\n  }\n\n  // async function handleAddImage(selectedFiles) {\n  //   if (selectedFiles[0].size > 1024 * 1024 * 10) {\n  //     setError(\"You can only upload files smaller than 10MB.\");\n  //     return;\n  //   }\n\n  //   if (selectedFiles[0].type.indexOf(\"image\") === -1) {\n  //     setError(\"You can only upload image files.\");\n  //     return;\n  //   }\n\n  //   let files = new FormData();\n  //   files.append(\"fileToUpload\", selectedFiles[0]);\n\n  //   setIsUploadingAttachment(true);\n\n  //   try {\n  //     const response = await postFile(\n  //       `/api/v2/services/${activeService.id}/image`,\n  //       files\n  //     );\n  //     const { imagePath } = response;\n  //     const newServices = services.map((service) => {\n  //       if (service.id === activeService.id) {\n  //         service.imagePath = imagePath;\n  //       }\n  //       return service;\n  //     });\n  //     onImageChange(newServices);\n  //     setIsUploadingAttachment(false);\n  //   } catch (errorMessage) {\n  //     setError(errorMessage);\n  //     setIsUploadingAttachment(false);\n  //   }\n  // }\n\n  // async function handleDeleteImage() {\n  //   setIsDeletingAttachment(true);\n  //   setError(null);\n  //   try {\n  //     await remove(`/api/v2/services/${activeService.id}/image`);\n\n  //     const newServices = services.map((service) => {\n  //       if (service.id === activeService.id) {\n  //         service.imagePath = null;\n  //       }\n  //       return service;\n  //     });\n  //     setIsDeletingAttachment(false);\n  //     onImageChange(newServices);\n  //   } catch (errorMessage) {\n  //     setIsDeletingAttachment(false);\n  //     setError(\n  //       \"There was an error deleting this file, please try again. If the problem persists, please contact us.\"\n  //     );\n  //   }\n  // }\n\n  return (\n    <LayoutWrapper>\n      <Box>\n        <ContentHolder>\n          <DropzoneWrapper>\n            <Dropzone\n              config={componentConfig}\n              eventHandlers={eventHandlers}\n              djsConfig={djsConfig}\n            />\n          </DropzoneWrapper>\n        </ContentHolder>\n      </Box>\n    </LayoutWrapper>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}